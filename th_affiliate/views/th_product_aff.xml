<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="th_view_product_aff_tree" model="ir.ui.view">
        <field name="name">th.view.product.aff.tree</field>
        <field name="model">th.product.aff</field>
        <field name="arch" type="xml">
            <tree string="" decoration-muted="state == 'close'" decoration-info="state == 'draft'" decoration-success="state == 'deploy'">
                <field name="name"/>
                <field name="state" invisible="1"/>
                <field name="th_aff_category_id"/>
                <field name="th_link_product"/>
            </tree>
        </field>
    </record>

    <record id="th_view_product_aff_form" model="ir.ui.view">
        <field name="name">th.view.product.aff.form</field>
        <field name="model">th.product.aff</field>
        <field name="arch" type="xml">
            <form string="Form" >
                <header>
                    <button name="action_draft" type="object" class="btn btn-primary" string="Nháp" states="deploy,close" groups="th_affiliate.group_aff_officer"/>
                    <button name="action_deploy" type="object" class="btn btn-primary" string="Triển khai" states="draft"  groups="th_affiliate.group_aff_officer"/>
                    <button name="action_close" type="object" class="btn" string="Đóng" states="deploy" groups="th_affiliate.group_aff_officer"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,deploy,close"/>
                </header>

                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button type="object" icon="fa-sign-out" name="action_visit_page" string="Xem Sản phẩm" class="oe_stat_button"/>
                    </div>
                    <field name="th_image" widget='image' filename="filename" class="oe_avatar my_class" options='{"zoom": true}'  attrs="{'readonly': [('state', '!=', 'draft')]}"/>

                    <group>
                        <group>
                            <field name="name" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="th_link_product" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="company_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        </group>
                        <group>
                            <field name="th_aff_category_id" string="Nhóm sản phẩm" attrs="{'readonly': [('state', '!=', 'draft')]}" options='{"no_open": True, "no_create": True}'/>
                            <field name="th_aff_ownership_unit_id" groups="th_affiliate.group_aff_administrator" options='{"no_open": True}'/>
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="th_view_product_aff_action" model="ir.actions.act_window">
        <field name="name">Sản phẩm</field>
        <field name="res_model">th.product.aff</field>
        <field name="view_mode">tree,form</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('th_view_product_aff_tree')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('th_view_product_aff_form')})]"/>
    </record>


</odoo>